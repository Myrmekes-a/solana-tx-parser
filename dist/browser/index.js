import{PublicKey as t,TransactionInstruction as e,SystemProgram as n,Transaction as r,SystemInstruction as o}from"@solana/web3.js";import{utils as i,BN as s,BorshInstructionCoder as a}from"@project-serum/anchor";for(var u={},c={byteLength:function(t){var e=y(t),n=e[0],r=e[1];return 3*(n+r)/4-r},toByteArray:function(t){var e,n,r=y(t),o=r[0],i=r[1],s=new d(function(t,e,n){return 3*(e+n)/4-n}(0,o,i)),a=0,u=i>0?o-4:o;for(n=0;n<u;n+=4)e=h[t.charCodeAt(n)]<<18|h[t.charCodeAt(n+1)]<<12|h[t.charCodeAt(n+2)]<<6|h[t.charCodeAt(n+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;2===i&&(e=h[t.charCodeAt(n)]<<2|h[t.charCodeAt(n+1)]>>4,s[a++]=255&e);1===i&&(e=h[t.charCodeAt(n)]<<10|h[t.charCodeAt(n+1)]<<4|h[t.charCodeAt(n+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e);return s},fromByteArray:function(t){for(var e,n=t.length,r=n%3,o=[],i=16383,s=0,a=n-r;s<a;s+=i)o.push(m(t,s,s+i>a?a:s+i));1===r?(e=t[n-1],o.push(f[e>>2]+f[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(f[e>>10]+f[e>>4&63]+f[e<<2&63]+"="));return o.join("")}},f=[],h=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,g=l.length;p<g;++p)f[p]=l[p],h[l.charCodeAt(p)]=p;function y(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function m(t,e,n){for(var r,o,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),i.push(f[(o=r)>>18&63]+f[o>>12&63]+f[o>>6&63]+f[63&o]);return i.join("")}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63;var w={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(t,e,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,c=u>>1,f=-7,h=n?o-1:0,d=n?-1:1,l=t[e+h];for(h+=d,i=l&(1<<-f)-1,l>>=-f,f+=a;f>0;i=256*i+t[e+h],h+=d,f-=8);for(s=i&(1<<-f)-1,i>>=-f,f+=r;f>0;s=256*s+t[e+h],h+=d,f-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(l?-1:1);s+=Math.pow(2,r),i-=c}return(l?-1:1)*s*Math.pow(2,i-r)},write:function(t,e,n,r,o,i){var s,a,u,c=8*i-o-1,f=(1<<c)-1,h=f>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:i-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,o),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;t[n+l]=255&a,l+=p,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;t[n+l]=255&s,l+=p,s/=256,c-=8);t[n+l-p]|=128*g}};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
!function(t){const e=c,n=w,r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},t.INSPECT_MAX_BYTES=50;const o=2147483647;function i(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,s.prototype),e}function s(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return a(t,e,n)}function a(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|p(t,e);let r=i(n);const o=r.write(t,e);o!==n&&(r=r.slice(0,o));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Y(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Y(t,ArrayBuffer)||t&&Y(t.buffer,ArrayBuffer))return d(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(Y(t,SharedArrayBuffer)||t&&Y(t.buffer,SharedArrayBuffer)))return d(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return s.from(r,e,n);const o=function(t){if(s.isBuffer(t)){const e=0|l(t.length),n=i(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||Z(t.length)?i(0):h(t);if("Buffer"===t.type&&Array.isArray(t.data))return h(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return u(t),i(t<0?0:0|l(t))}function h(t){const e=t.length<0?0:0|l(t.length),n=i(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function d(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,s.prototype),r}function l(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function p(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Y(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(o)return r?-1:G(t).length;e=(""+e).toLowerCase(),o=!0}}function g(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return B(this,e,n);case"ascii":return U(this,e,n);case"latin1":case"binary":return x(this,e,n);case"base64":return v(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,o){let i,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){let r=-1;for(i=n;i<a;i++)if(c(t,i)===c(e,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===u)return r*s}else-1!==r&&(i-=i-r),r=-1}else for(n+u>a&&(n=a-u),i=n;i>=0;i--){let n=!0;for(let r=0;r<u;r++)if(c(t,i+r)!==c(e,r)){n=!1;break}if(n)return i}return-1}function k(t,e,n,r){n=Number(n)||0;const o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=e.length;let s;for(r>i/2&&(r=i/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(Z(r))return s;t[n+s]=r}return s}function I(t,e,n,r){return J(G(e,t.length-n),t,n,r)}function A(t,e,n,r){return J(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function E(t,e,n,r){return J(H(e),t,n,r)}function S(t,e,n,r){return J(function(t,e){let n,r,o;const i=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function v(t,n,r){return 0===n&&r===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(n,r))}function B(t,e,n){n=Math.min(t.length,n);const r=[];let o=e;for(;o<n;){const e=t[o];let i=null,s=e>239?4:e>223?3:e>191?2:1;if(o+s<=n){let n,r,a,u;switch(s){case 1:e<128&&(i=e);break;case 2:n=t[o+1],128==(192&n)&&(u=(31&e)<<6|63&n,u>127&&(i=u));break;case 3:n=t[o+1],r=t[o+2],128==(192&n)&&128==(192&r)&&(u=(15&e)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:n=t[o+1],r=t[o+2],a=t[o+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(u=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=s}return function(t){const e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}(r)}t.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(t,e,n){return a(t,e,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?i(t):void 0!==e?"string"==typeof n?i(t).fill(e,n):i(t).fill(e):i(t)}(t,e,n)},s.allocUnsafe=function(t){return f(t)},s.allocUnsafeSlow=function(t){return f(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(Y(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),Y(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=s.allocUnsafe(e);let o=0;for(n=0;n<t.length;++n){let e=t[n];if(Y(e,Uint8Array))o+e.length>r.length?(s.isBuffer(e)||(e=s.from(e)),e.copy(r,o)):Uint8Array.prototype.set.call(r,e,o);else{if(!s.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,o)}o+=e.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},s.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},s.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},s.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):g.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(t,e,n,r,o){if(Y(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;let i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0);const u=Math.min(i,a),c=this.slice(r,o),f=t.slice(e,n);for(let t=0;t<u;++t)if(c[t]!==f[t]){i=c[t],a=f[t];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return k(this,t,e,n);case"utf8":case"utf-8":return I(this,t,e,n);case"ascii":case"latin1":case"binary":return A(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function U(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function x(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function P(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=e;r<n;++r)o+=K[t[r]];return o}function L(t,e,n){const r=t.slice(e,n);let o="";for(let t=0;t<r.length-1;t+=2)o+=String.fromCharCode(r[t]+256*r[t+1]);return o}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,o,i){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function z(t,e,n,r,o){W(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function R(t,e,n,r,o){W(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i>>=8,t[n+6]=i,i>>=8,t[n+5]=i,i>>=8,t[n+4]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function O(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,r,o,i){return e=+e,r>>>=0,i||O(t,0,r,4),n.write(t,e,r,o,23,4),r+4}function N(t,e,r,o,i){return e=+e,r>>>=0,i||O(t,0,r,8),n.write(t,e,r,o,52,8),r+8}s.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=X((function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),s.prototype.readBigUInt64BE=X((function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),s.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=e,o=1,i=this[t+--r];for(;r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},s.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=X((function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),s.prototype.readBigInt64BE=X((function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),s.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),n.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),n.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),n.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),n.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){M(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){M(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigUInt64LE=X((function(t,e=0){return z(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeBigUInt64BE=X((function(t,e=0){return R(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);M(this,t,e,n,r-1,-r)}let o=0,i=1,s=0;for(this[e]=255&t;++o<n&&(i*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);M(this,t,e,n,r-1,-r)}let o=n-1,i=1,s=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigInt64LE=X((function(t,e=0){return z(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeBigInt64BE=X((function(t,e=0){return R(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const o=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{const i=s.isBuffer(t)?t:s.from(t,r),a=i.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=i[o%a]}return this};const _={};function D(t,e,n){_[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function $(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function W(t,e,n,r,o,i){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new _.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,n){j(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||q(e,t.length-(n+1))}(r,o,i)}function j(t,e){if("number"!=typeof t)throw new _.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,n){if(Math.floor(t)!==t)throw j(t,n),new _.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new _.ERR_BUFFER_OUT_OF_BOUNDS;throw new _.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}D("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),D("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),D("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=$(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=$(o)),o+="n"),r+=` It must be ${e}. Received ${o}`,r}),RangeError);const V=/[^+/0-9A-Za-z-_]/g;function G(t,e){let n;e=e||1/0;const r=t.length;let o=null;const i=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function H(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function J(t,e,n,r){let o;for(o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function Y(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Z(t){return t!=t}const K=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)e[r+o]=t[n]+t[o]}return e}();function X(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}}(u);const b=new t("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new t("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const k=new t("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new t("So11111111111111111111111111111111111111112"),new t("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");var I={};Object.defineProperty(I,"__esModule",{value:!0});var A=I.s16=I.s8=I.nu64be=I.u48be=I.u40be=I.u32be=I.u24be=I.u16be=I.nu64=I.u48=I.u40=ut=I.u32=I.u24=at=I.u16=st=I.u8=I.offset=I.greedy=I.Constant=I.UTF8=I.CString=I.Blob=I.Boolean=I.BitField=I.BitStructure=I.VariantLayout=I.Union=I.UnionLayoutDiscriminator=I.UnionDiscriminator=I.Structure=I.Sequence=I.DoubleBE=I.Double=I.FloatBE=I.Float=I.NearInt64BE=I.NearInt64=I.NearUInt64BE=I.NearUInt64=I.IntBE=I.Int=I.UIntBE=I.UInt=I.OffsetLayout=I.GreedyCount=I.ExternalLayout=I.bindConstructorLayout=I.nameWithProperty=I.Layout=I.uint8ArrayToBuffer=I.checkUint8Array=void 0;I.constant=I.utf8=I.cstr=ht=I.blob=I.unionLayoutDiscriminator=I.union=I.seq=I.bits=ft=I.struct=I.f64be=I.f64=I.f32be=I.f32=I.ns64be=I.s48be=I.s40be=I.s32be=I.s24be=I.s16be=ct=I.ns64=I.s48=I.s40=I.s32=I.s24=void 0;const E=u;function S(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function v(t){return S(t),E.Buffer.from(t.buffer,t.byteOffset,t.length)}I.checkUint8Array=S,I.uint8ArrayToBuffer=v;class B{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}function T(t,e){return e.property?t+"["+e.property+"]":t}I.Layout=B,I.nameWithProperty=T,I.bindConstructorLayout=function(t,e){if("function"!=typeof t)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof B))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(t,"decode",{value:(t,n)=>e.decode(t,n),writable:!0})};class U extends B{isCount(){throw new Error("ExternalLayout is abstract")}}I.ExternalLayout=U;class x extends U{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){S(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}I.GreedyCount=x;class P extends U{constructor(t,e=0,n){if(!(t instanceof B))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof L||this.layout instanceof C}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}I.OffsetLayout=P;class L extends B{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return v(t).readUIntLE(e,this.span)}encode(t,e,n=0){return v(e).writeUIntLE(t,n,this.span),this.span}}I.UInt=L;class C extends B{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return v(t).readUIntBE(e,this.span)}encode(t,e,n=0){return v(e).writeUIntBE(t,n,this.span),this.span}}I.UIntBE=C;class M extends B{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return v(t).readIntLE(e,this.span)}encode(t,e,n=0){return v(e).writeIntLE(t,n,this.span),this.span}}I.Int=M;class z extends B{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return v(t).readIntBE(e,this.span)}encode(t,e,n=0){return v(e).writeIntBE(t,n,this.span),this.span}}I.IntBE=z;const R=Math.pow(2,32);function O(t){const e=Math.floor(t/R);return{hi32:e,lo32:t-e*R}}function F(t,e){return t*R+e}class N extends B{constructor(t){super(8,t)}decode(t,e=0){const n=v(t),r=n.readUInt32LE(e);return F(n.readUInt32LE(e+4),r)}encode(t,e,n=0){const r=O(t),o=v(e);return o.writeUInt32LE(r.lo32,n),o.writeUInt32LE(r.hi32,n+4),8}}I.NearUInt64=N;class _ extends B{constructor(t){super(8,t)}decode(t,e=0){const n=v(t);return F(n.readUInt32BE(e),n.readUInt32BE(e+4))}encode(t,e,n=0){const r=O(t),o=v(e);return o.writeUInt32BE(r.hi32,n),o.writeUInt32BE(r.lo32,n+4),8}}I.NearUInt64BE=_;class D extends B{constructor(t){super(8,t)}decode(t,e=0){const n=v(t),r=n.readUInt32LE(e);return F(n.readInt32LE(e+4),r)}encode(t,e,n=0){const r=O(t),o=v(e);return o.writeUInt32LE(r.lo32,n),o.writeInt32LE(r.hi32,n+4),8}}I.NearInt64=D;class $ extends B{constructor(t){super(8,t)}decode(t,e=0){const n=v(t);return F(n.readInt32BE(e),n.readUInt32BE(e+4))}encode(t,e,n=0){const r=O(t),o=v(e);return o.writeInt32BE(r.hi32,n),o.writeUInt32BE(r.lo32,n+4),8}}I.NearInt64BE=$;class W extends B{constructor(t){super(4,t)}decode(t,e=0){return v(t).readFloatLE(e)}encode(t,e,n=0){return v(e).writeFloatLE(t,n),4}}I.Float=W;class j extends B{constructor(t){super(4,t)}decode(t,e=0){return v(t).readFloatBE(e)}encode(t,e,n=0){return v(e).writeFloatBE(t,n),4}}I.FloatBE=j;class q extends B{constructor(t){super(8,t)}decode(t,e=0){return v(t).readDoubleLE(e)}encode(t,e,n=0){return v(e).writeDoubleLE(t,n),8}}I.Double=q;class V extends B{constructor(t){super(8,t)}decode(t,e=0){return v(t).readDoubleBE(e)}encode(t,e,n=0){return v(e).writeDoubleBE(t,n),8}}I.DoubleBE=V;class G extends B{constructor(t,e,n){if(!(t instanceof B))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof U&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;!(e instanceof U)&&0<t.span&&(r=e*t.span),super(r,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,r=this.count;if(r instanceof U&&(r=r.decode(t,e)),0<this.elementLayout.span)n=r*this.elementLayout.span;else{let o=0;for(;o<r;)n+=this.elementLayout.getSpan(t,e+n),++o}return n}decode(t,e=0){const n=[];let r=0,o=this.count;for(o instanceof U&&(o=o.decode(t,e));r<o;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),r+=1;return n}encode(t,e,n=0){const r=this.elementLayout,o=t.reduce(((t,o)=>t+r.encode(o,e,n+t)),0);return this.count instanceof U&&this.count.encode(t.length,e,n),o}}I.Sequence=G;class H extends B{constructor(t,e,n){if(!Array.isArray(t)||!t.reduce(((t,e)=>t&&e instanceof B),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===n&&(n=e,e=void 0);for(const e of t)if(0>e.span&&void 0===e.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=t.reduce(((t,e)=>t+e.getSpan()),0)}catch(t){}super(r,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce(((n,r)=>{const o=r.getSpan(t,e);return e+=o,n+o}),0)}catch(t){throw new RangeError("indeterminate span")}return n}decode(t,e=0){S(t);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(t,e)),e+=r.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const r=n;let o=0,i=0;for(const r of this.fields){let s=r.span;if(i=0<s?s:0,void 0!==r.property){const o=t[r.property];void 0!==o&&(i=r.encode(o,e,n),0>s&&(s=r.getSpan(e,n)))}o=n,n+=s}return o+i-r}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}I.Structure=H;class J{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}I.UnionDiscriminator=J;class Y extends J{constructor(t,e){if(!(t instanceof U&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}I.UnionLayoutDiscriminator=Y;class Z extends B{constructor(t,e,n){let r;if(t instanceof L||t instanceof C)r=new Y(new P(t));else if(t instanceof U&&t.isCount())r=new Y(t);else{if(!(t instanceof J))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");r=t}if(void 0===e&&(e=null),!(null===e||e instanceof B))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let o=-1;e&&(o=e.span,0<=o&&(t instanceof L||t instanceof C)&&(o+=r.layout.span)),super(o,n),this.discriminator=r,this.usesPrefixDiscriminator=t instanceof L||t instanceof C,this.defaultLayout=e,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return i(t)},this.configGetSourceVariant=function(t){i=t.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const r=this.discriminator,o=r.decode(t,e),i=this.registry[o];if(void 0===i){const i=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=r.layout.span),n=this.makeDestinationObject(),n[r.property]=o,n[i.property]=i.decode(t,e+s)}else n=i.decode(t,e);return n}encode(t,e,n=0){const r=this.getSourceVariant(t);if(void 0===r){const r=this.discriminator,o=this.defaultLayout;let i=0;return this.usesPrefixDiscriminator&&(i=r.layout.span),r.encode(t[r.property],e,n),i+o.encode(t[o.property],e,n+i)}return r.encode(t,e,n)}addVariant(t,e,n){const r=new K(this,t,e,n);return this.registry[t]=r,r}getVariant(t,e=0){let n;return n=t instanceof Uint8Array?this.discriminator.decode(t,e):t,this.registry[n]}}I.Union=Z;class K extends B{constructor(t,e,n,r){if(!(t instanceof Z))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof B))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let o=t.span;0>t.span&&(o=n?n.span:0,0<=o&&t.usesPrefixDiscriminator&&(o+=t.discriminator.layout.span)),super(o,r),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let r=0;return this.layout&&(r=this.layout.getSpan(t,e+n)),n+r}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let o=r;if(this.layout&&(this.layout.encode(t[this.property],e,n+r),o+=this.layout.getSpan(e,n+r),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function X(t){return 0>t&&(t+=4294967296),t}I.VariantLayout=K;class Q extends B{constructor(t,e,n){if(!(t instanceof L||t instanceof C))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof e&&void 0===n&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let r=0;this._packedSetValue=function(t){return r=X(t),this},this._packedGetValue=function(){return r}}decode(t,e=0){const n=this.makeDestinationObject(),r=this.word.decode(t,e);this._packedSetValue(r);for(const e of this.fields)void 0!==e.property&&(n[e.property]=e.decode(t));return n}encode(t,e,n=0){const r=this.word.decode(e,n);this._packedSetValue(r);for(const e of this.fields)if(void 0!==e.property){const n=t[e.property];void 0!==n&&e.encode(n)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new tt(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new et(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}I.BitStructure=Q;class tt{constructor(t,e,n){if(!(t instanceof Q))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const r=8*t.span,o=t.fields.reduce(((t,e)=>t+e.bits),0);if(e+o>r)throw new Error("bits too long for span remainder ("+(r-o)+" of "+r+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=r-o-e),this.wordMask=X(this.valueMask<<this.start),this.property=n}decode(t,e){return X(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(t){if("number"!=typeof t||!Number.isInteger(t)||t!==X(t&this.valueMask))throw new TypeError(T("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=X(t<<this.start);this.container._packedSetValue(X(e&~this.wordMask)|n)}}I.BitField=tt;class et extends tt{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){"boolean"==typeof t&&(t=+t),super.encode(t)}}I.Boolean=et;class nt extends B{constructor(t,e){if(!(t instanceof U&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof U||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),v(t).slice(e,e+n)}encode(t,e,n){let r=this.length;if(this.length instanceof U&&(r=t.length),!(t instanceof Uint8Array&&r===t.length))throw new TypeError(T("Blob.encode",this)+" requires (length "+r+") Uint8Array as src");if(n+r>e.length)throw new RangeError("encoding overruns Uint8Array");const o=v(t);return v(e).write(o.toString("hex"),n,r,"hex"),this.length instanceof U&&this.length.encode(r,e,n),r}}I.Blob=nt;class rt extends B{constructor(t){super(-1,t)}getSpan(t,e=0){S(t);let n=e;for(;n<t.length&&0!==t[n];)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return v(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){"string"!=typeof t&&(t=String(t));const r=E.Buffer.from(t,"utf8"),o=r.length;if(n+o>e.length)throw new RangeError("encoding overruns Buffer");const i=v(e);return r.copy(i,n),i[n+o]=0,o+1}}I.CString=rt;class ot extends B{constructor(t,e){if("string"==typeof t&&void 0===e&&(e=t,t=void 0),void 0===t)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return S(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return v(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){"string"!=typeof t&&(t=String(t));const r=E.Buffer.from(t,"utf8"),o=r.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(n+o>e.length)throw new RangeError("encoding overruns Buffer");return r.copy(v(e),n),o}}I.UTF8=ot;class it extends B{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}I.Constant=it,I.greedy=(t,e)=>new x(t,e),I.offset=(t,e,n)=>new P(t,e,n);var st=I.u8=t=>new L(1,t),at=I.u16=t=>new L(2,t);I.u24=t=>new L(3,t);var ut=I.u32=t=>new L(4,t);I.u40=t=>new L(5,t),I.u48=t=>new L(6,t),I.nu64=t=>new N(t),I.u16be=t=>new C(2,t),I.u24be=t=>new C(3,t),I.u32be=t=>new C(4,t),I.u40be=t=>new C(5,t),I.u48be=t=>new C(6,t),I.nu64be=t=>new _(t),I.s8=t=>new M(1,t),A=I.s16=t=>new M(2,t),I.s24=t=>new M(3,t),I.s32=t=>new M(4,t),I.s40=t=>new M(5,t),I.s48=t=>new M(6,t);var ct=I.ns64=t=>new D(t);I.s16be=t=>new z(2,t),I.s24be=t=>new z(3,t),I.s32be=t=>new z(4,t),I.s40be=t=>new z(5,t),I.s48be=t=>new z(6,t),I.ns64be=t=>new $(t),I.f32=t=>new W(t),I.f32be=t=>new j(t),I.f64=t=>new q(t),I.f64be=t=>new V(t);var ft=I.struct=(t,e,n)=>new H(t,e,n);I.bits=(t,e,n)=>new Q(t,e,n),I.seq=(t,e,n)=>new G(t,e,n),I.union=(t,e,n)=>new Z(t,e,n),I.unionLayoutDiscriminator=(t,e)=>new Y(t,e);var ht=I.blob=(t,e)=>new nt(t,e);I.cstr=t=>new rt(t),I.utf8=(t,e)=>new ot(t,e),I.constant=(t,e)=>new it(t,e);const dt=t=>({decode:t.decode.bind(t),encode:t.encode.bind(t)});var lt={};Object.defineProperty(lt,"__esModule",{value:!0});var pt=lt.toBigIntLE=function(t){{const e=Buffer.from(t);e.reverse();const n=e.toString("hex");return 0===n.length?BigInt(0):BigInt(`0x${n}`)}};lt.toBigIntBE=function(t){{const e=t.toString("hex");return 0===e.length?BigInt(0):BigInt(`0x${e}`)}};var gt=lt.toBufferLE=function(t,e){{const n=t.toString(16),r=Buffer.from(n.padStart(2*e,"0").slice(0,2*e),"hex");return r.reverse(),r}};lt.toBufferBE=function(t,e){{const n=t.toString(16);return Buffer.from(n.padStart(2*e,"0").slice(0,2*e),"hex")}};const yt=(mt=8,t=>{const e=ht(mt,t),{encode:n,decode:r}=dt(e),o=e;return o.decode=(t,e)=>{const n=r(t,e);return pt(Buffer.from(n))},o.encode=(t,e,r)=>{const o=gt(t,mt);return n(o,e,r)},o});var mt;const wt=t=>{const e=st(t),{encode:n,decode:r}=dt(e),o=e;return o.decode=(t,e)=>!!r(t,e),o.encode=(t,e,r)=>{const o=Number(t);return n(o,e,r)},o},bt=e=>{const n=ht(32,e),{encode:r,decode:o}=dt(n),i=n;return i.decode=(e,n)=>{const r=o(e,n);return new t(r)},i.encode=(t,e,n)=>{const o=t.toBuffer();return r(o,e,n)},i};class kt extends Error{constructor(t){super(t)}}class It extends kt{constructor(){super(...arguments),this.name="TokenInvalidInstructionProgramError"}}class At extends kt{constructor(){super(...arguments),this.name="TokenInvalidInstructionKeysError"}}class Et extends kt{constructor(){super(...arguments),this.name="TokenInvalidInstructionDataError"}}class St extends kt{constructor(){super(...arguments),this.name="TokenInvalidInstructionTypeError"}}var vt;!function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate"}(vt||(vt={})),ft([st("instruction"),yt("amount")]);const Bt=ft([st("instruction"),yt("amount")]);function Tt(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==Bt.span)throw new Et;const{keys:{account:n,delegate:r,owner:o,multiSigners:i},data:s}=function({programId:t,keys:[e,n,r,...o],data:i}){return{programId:t,keys:{account:e,delegate:n,owner:r,multiSigners:o},data:Bt.decode(i)}}(t);if(s.instruction!==vt.Approve)throw new St;if(!n||!r||!o)throw new At;return{programId:e,keys:{account:n,delegate:r,owner:o,multiSigners:i},data:s}}const Ut=ft([st("instruction"),yt("amount"),st("decimals")]);function xt(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==Ut.span)throw new Et;const{keys:{account:n,mint:r,delegate:o,owner:i,multiSigners:s},data:a}=function({programId:t,keys:[e,n,r,o,...i],data:s}){return{programId:t,keys:{account:e,mint:n,delegate:r,owner:o,multiSigners:i},data:Ut.decode(s)}}(t);if(a.instruction!==vt.ApproveChecked)throw new St;if(!(n&&r&&o&&i))throw new At;return{programId:e,keys:{account:n,mint:r,delegate:o,owner:i,multiSigners:s},data:a}}const Pt=ft([st("instruction"),yt("amount")]);function Lt(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==Pt.span)throw new Et;const{keys:{account:n,mint:r,owner:o,multiSigners:i},data:s}=function({programId:t,keys:[e,n,r,...o],data:i}){return{programId:t,keys:{account:e,mint:n,owner:r,multiSigners:o},data:Pt.decode(i)}}(t);if(s.instruction!==vt.Burn)throw new St;if(!n||!r||!o)throw new At;return{programId:e,keys:{account:n,mint:r,owner:o,multiSigners:i},data:s}}const Ct=ft([st("instruction"),yt("amount"),st("decimals")]);function Mt(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==Ct.span)throw new Et;const{keys:{account:n,mint:r,owner:o,multiSigners:i},data:s}=function({programId:t,keys:[e,n,r,...o],data:i}){return{programId:t,keys:{account:e,mint:n,owner:r,multiSigners:o},data:Ct.decode(i)}}(t);if(s.instruction!==vt.BurnChecked)throw new St;if(!n||!r||!o)throw new At;return{programId:e,keys:{account:n,mint:r,owner:o,multiSigners:i},data:s}}const zt=ft([st("instruction")]);function Rt(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==zt.span)throw new Et;const{keys:{account:n,destination:r,authority:o,multiSigners:i},data:s}=function({programId:t,keys:[e,n,r,...o],data:i}){return{programId:t,keys:{account:e,destination:n,authority:r,multiSigners:o},data:zt.decode(i)}}(t);if(s.instruction!==vt.CloseAccount)throw new St;if(!n||!r||!o)throw new At;return{programId:e,keys:{account:n,destination:r,authority:o,multiSigners:i},data:s}}var Ot;!function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Mint=1]="Mint",t[t.Account=2]="Account"}(Ot||(Ot={}));var Ft;ft([st("m"),st("n"),wt("isInitialized"),bt("signer1"),bt("signer2"),bt("signer3"),bt("signer4"),bt("signer5"),bt("signer6"),bt("signer7"),bt("signer8"),bt("signer9"),bt("signer10"),bt("signer11")]).span,function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Frozen=2]="Frozen"}(Ft||(Ft={}));ft([bt("mint"),bt("owner"),yt("amount"),ut("delegateOption"),bt("delegate"),st("state"),ut("isNativeOption"),yt("isNative"),yt("delegatedAmount"),ut("closeAuthorityOption"),bt("closeAuthority")]).span;var Nt;ft([ut("mintAuthorityOption"),bt("mintAuthority"),yt("supply"),st("decimals"),wt("isInitialized"),ut("freezeAuthorityOption"),bt("freezeAuthority")]).span,function(t){t[t.Enable=0]="Enable",t[t.Disable=1]="Disable"}(Nt||(Nt={})),ft([st("instruction"),st("cpiGuardInstruction")]);var _t;ft([wt("lockCpi")]).span,function(t){t[t.Initialize=0]="Initialize",t[t.Update=1]="Update"}(_t||(_t={})),ft([st("instruction"),st("defaultAccountStateInstruction"),st("accountState")]);ft([st("state")]).span;ft([]).span;var Dt;ft([bt("rateAuthority"),ct("initializationTimestamp"),A("preUpdateAverageRate"),ct("lastUpdateTimestamp"),A("currentRate")]).span,function(t){t[t.Enable=0]="Enable",t[t.Disable=1]="Disable"}(Dt||(Dt={})),ft([st("instruction"),st("memoTransferInstruction")]);ft([wt("requireIncomingTransferMemos")]).span;ft([bt("closeAuthority")]).span;ft([]).span;var $t;function Wt(t){return ft([yt("epoch"),yt("maximumFee"),at("transferFeeBasisPoints")],t)}ft([bt("delegate")]).span,function(t){t[t.InitializeTransferFeeConfig=0]="InitializeTransferFeeConfig",t[t.TransferCheckedWithFee=1]="TransferCheckedWithFee",t[t.WithdrawWithheldTokensFromMint=2]="WithdrawWithheldTokensFromMint",t[t.WithdrawWithheldTokensFromAccounts=3]="WithdrawWithheldTokensFromAccounts",t[t.HarvestWithheldTokensToMint=4]="HarvestWithheldTokensToMint",t[t.SetTransferFee=5]="SetTransferFee"}($t||($t={})),ft([st("instruction"),st("transferFeeInstruction"),st("transferFeeConfigAuthorityOption"),bt("transferFeeConfigAuthority"),st("withdrawWithheldAuthorityOption"),bt("withdrawWithheldAuthority"),at("transferFeeBasisPoints"),yt("maximumFee")]),ft([st("instruction"),st("transferFeeInstruction"),yt("amount"),st("decimals"),yt("fee")]),ft([st("instruction"),st("transferFeeInstruction")]),ft([st("instruction"),st("transferFeeInstruction"),st("numTokenAccounts")]),ft([st("instruction"),st("transferFeeInstruction")]);ft([bt("transferFeeConfigAuthority"),bt("withdrawWithheldAuthority"),yt("withheldAmount"),Wt("olderTransferFee"),Wt("newerTransferFee")]).span;var jt;ft([yt("withheldAmount")]).span,function(t){t[t.Uninitialized=0]="Uninitialized",t[t.TransferFeeConfig=1]="TransferFeeConfig",t[t.TransferFeeAmount=2]="TransferFeeAmount",t[t.MintCloseAuthority=3]="MintCloseAuthority",t[t.ConfidentialTransferMint=4]="ConfidentialTransferMint",t[t.ConfidentialTransferAccount=5]="ConfidentialTransferAccount",t[t.DefaultAccountState=6]="DefaultAccountState",t[t.ImmutableOwner=7]="ImmutableOwner",t[t.MemoTransfer=8]="MemoTransfer",t[t.NonTransferable=9]="NonTransferable",t[t.InterestBearingConfig=10]="InterestBearingConfig",t[t.CpiGuard=11]="CpiGuard",t[t.PermanentDelegate=12]="PermanentDelegate"}(jt||(jt={}));const qt=ft([st("instruction")]);function Vt(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==qt.span)throw new Et;const{keys:{account:n,mint:r,owner:o,rent:i},data:s}=function({programId:t,keys:[e,n,r,o],data:i}){return{programId:t,keys:{account:e,mint:n,owner:r,rent:o},data:qt.decode(i)}}(t);if(s.instruction!==vt.InitializeAccount)throw new St;if(!(n&&r&&o&&i))throw new At;return{programId:e,keys:{account:n,mint:r,owner:o,rent:i},data:s}}ft([st("instruction"),st("decimals"),bt("mintAuthority"),st("freezeAuthorityOption"),bt("freezeAuthority")]);const Gt=ft([st("instruction"),st("m")]);function Ht(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==Gt.span)throw new Et;const{keys:{account:n,rent:r,signers:o},data:i}=function({programId:t,keys:[e,n,...r],data:o}){return{programId:t,keys:{account:e,rent:n,signers:r},data:Gt.decode(o)}}(t);if(i.instruction!==vt.InitializeMultisig)throw new St;if(!n||!r||!o.length)throw new At;return{programId:e,keys:{account:n,rent:r,signers:o},data:i}}ft([st("instruction")]),ft([st("instruction")]);const Jt=ft([st("instruction")]);function Yt(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==Jt.span)throw new Et;const{keys:{account:n,mint:r,authority:o,multiSigners:i},data:s}=function({programId:t,keys:[e,n,r,...o],data:i}){return{programId:t,keys:{account:e,mint:n,authority:r,multiSigners:o},data:Jt.decode(i)}}(t);if(s.instruction!==vt.FreezeAccount)throw new St;if(!n||!r||!o)throw new At;return{programId:e,keys:{account:n,mint:r,authority:o,multiSigners:i},data:s}}const Zt=ft([st("instruction"),yt("amount")]);function Kt(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==Zt.span)throw new Et;const{keys:{mint:n,destination:r,authority:o,multiSigners:i},data:s}=function({programId:t,keys:[e,n,r,...o],data:i}){return{programId:t,keys:{mint:e,destination:n,authority:r,multiSigners:o},data:Zt.decode(i)}}(t);if(s.instruction!==vt.MintTo)throw new St;if(!n||!r||!o)throw new At;return{programId:e,keys:{mint:n,destination:r,authority:o,multiSigners:i},data:s}}const Xt=ft([st("instruction"),yt("amount"),st("decimals")]);function Qt(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==Xt.span)throw new Et;const{keys:{mint:n,destination:r,authority:o,multiSigners:i},data:s}=function({programId:t,keys:[e,n,r,...o],data:i}){return{programId:t,keys:{mint:e,destination:n,authority:r,multiSigners:o},data:Xt.decode(i)}}(t);if(s.instruction!==vt.MintToChecked)throw new St;if(!n||!r||!o)throw new At;return{programId:e,keys:{mint:n,destination:r,authority:o,multiSigners:i},data:s}}const te=ft([st("instruction")]);function ee(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==te.span)throw new Et;const{keys:{account:n,owner:r,multiSigners:o},data:i}=function({programId:t,keys:[e,n,...r],data:o}){return{programId:t,keys:{account:e,owner:n,multiSigners:r},data:te.decode(o)}}(t);if(i.instruction!==vt.Revoke)throw new St;if(!n||!r)throw new At;return{programId:e,keys:{account:n,owner:r,multiSigners:o},data:i}}var ne;!function(t){t[t.MintTokens=0]="MintTokens",t[t.FreezeAccount=1]="FreezeAccount",t[t.AccountOwner=2]="AccountOwner",t[t.CloseAccount=3]="CloseAccount"}(ne||(ne={}));const re=ft([st("instruction"),st("authorityType"),st("newAuthorityOption"),bt("newAuthority")]);function oe(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==re.span)throw new Et;const{keys:{account:n,currentAuthority:r,multiSigners:o},data:i}=function({programId:t,keys:[e,n,...r],data:o}){const{instruction:i,authorityType:s,newAuthorityOption:a,newAuthority:u}=re.decode(o);return{programId:t,keys:{account:e,currentAuthority:n,multiSigners:r},data:{instruction:i,authorityType:s,newAuthority:a?u:null}}}(t);if(i.instruction!==vt.SetAuthority)throw new St;if(!n||!r)throw new At;return{programId:e,keys:{account:n,currentAuthority:r,multiSigners:o},data:i}}const ie=ft([st("instruction")]);function se(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==ie.span)throw new Et;const{keys:{account:n,mint:r,authority:o,multiSigners:i},data:s}=function({programId:t,keys:[e,n,r,...o],data:i}){return{programId:t,keys:{account:e,mint:n,authority:r,multiSigners:o},data:ie.decode(i)}}(t);if(s.instruction!==vt.ThawAccount)throw new St;if(!n||!r||!o)throw new At;return{programId:e,keys:{account:n,mint:r,authority:o,multiSigners:i},data:s}}const ae=ft([st("instruction"),yt("amount")]);function ue(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==ae.span)throw new Et;const{keys:{source:n,destination:r,owner:o,multiSigners:i},data:s}=function({programId:t,keys:[e,n,r,...o],data:i}){return{programId:t,keys:{source:e,destination:n,owner:r,multiSigners:o},data:ae.decode(i)}}(t);if(s.instruction!==vt.Transfer)throw new St;if(!n||!r||!o)throw new At;return{programId:e,keys:{source:n,destination:r,owner:o,multiSigners:i},data:s}}const ce=ft([st("instruction"),yt("amount"),st("decimals")]);function fe(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==ce.span)throw new Et;const{keys:{source:n,mint:r,destination:o,owner:i,multiSigners:s},data:a}=function({programId:t,keys:[e,n,r,o,...i],data:s}){return{programId:t,keys:{source:e,mint:n,destination:r,owner:o,multiSigners:i},data:ce.decode(s)}}(t);if(a.instruction!==vt.TransferChecked)throw new St;if(!(n&&r&&o&&i))throw new At;return{programId:e,keys:{source:n,mint:r,destination:o,owner:i,multiSigners:s},data:a}}const he=ft([st("instruction"),st("decimals"),bt("mintAuthority"),st("freezeAuthorityOption"),bt("freezeAuthority")]);function de({programId:t,keys:[e,n],data:r}){const{instruction:o,decimals:i,mintAuthority:s,freezeAuthorityOption:a,freezeAuthority:u}=he.decode(r);return{programId:t,keys:{mint:e,rent:n},data:{instruction:o,decimals:i,mintAuthority:s,freezeAuthority:a?u:null}}}var le;function pe(t){const e=t.startsWith("0x")?t.slice(2):t;return Buffer.from(e)}function ge(e,n){const r="legacy"===e.version?e.accountKeys:e.staticAccountKeys,o=e.header.numReadonlySignedAccounts,i=e.header.numReadonlyUnsignedAccounts,s=e.header.numRequiredSignatures,a=r.length;let u=r.map(((e,n)=>({isSigner:n<s,isWritable:n<s-o||n>=s&&n<a-i,pubkey:new t(e)})));const[c,f]="legacy"===e.version?[[],[]]:n?[n.writable,n.readonly]:[[],[]];return c&&(u=[...u,...c.map((t=>({isSigner:!1,isWritable:!0,pubkey:t})))]),f&&(u=[...u,...f.map((t=>({isSigner:!1,isWritable:!1,pubkey:t})))]),u}function ye(t,n){if("string"==typeof t.data){const r=t;return new e({data:i.bytes.bs58.decode(r.data),programId:n[r.programIdIndex].pubkey,keys:r.accounts.map((t=>n[t]))})}{const r=t;return new e({data:Buffer.from(r.data),programId:n[r.programIdIndex].pubkey,keys:r.accountKeyIndexes.map((t=>{if(t>=n.length)throw new Error(`Trying to resolve account at index ${t} while parsedAccounts is only ${n.length}. \t\t\t\t\t\tLooks like you're trying to parse versioned transaction, make sure that LoadedAddresses are passed to the \t\t\t\t\t\tparseTransactionAccounts function`);return n[t]}))})}}function me(t,e){const n=e.map((t=>({pk:t.pubkey.toString(),...t})));return t.map((t=>{const e=t.toString(),r=n.find((t=>t.pk===e));if(!r)throw new Error(`Account ${e} not present in account meta!`);return r}))}function we(t,n){return new e({data:i.bytes.bs58.decode(t.data),programId:t.programId,keys:me(t.accounts,n)})}function be(t){var e,n,r;const o=[];if(null==t)return[];const i=t.transaction.message.compiledInstructions,s=ge(t.transaction.message,null===(e=t.meta)||void 0===e?void 0:e.loadedAddresses),a=((null===(n=null==t?void 0:t.meta)||void 0===n?void 0:n.innerInstructions)||[]).sort(((t,e)=>t.index-e.index)),u=((null===(r=t.meta)||void 0===r?void 0:r.innerInstructions)||[]).reduce(((t,e)=>t+e.instructions.length),0)+i.length;let c=-1,f=-1;for(const t of a){for(;c!==t.index;)c+=1,f+=1,o.push(ye(i[c],s));for(const e of t.instructions)o.push(ye(e,s)),f+=1}for(;f<u-1;)c+=1,f+=1,o.push(ye(i[c],s));return o}function ke(t,e,n,r){return{logMessages:[],dataLogs:[],rawLogs:[],errors:[],programId:t,depth:e,id:n,instructionIndex:r}}function Ie(t){const e=/(?<logTruncated>^Log truncated$)|(?<programInvoke>^Program (?<invokeProgramId>[1-9A-HJ-NP-Za-km-z]{32,}) invoke \[(?<level>\d+)\]$)|(?<programSuccessResult>^Program (?<successResultProgramId>[1-9A-HJ-NP-Za-km-z]{32,}) success$)|(?<programFailedResult>^Program (?<failedResultProgramId>[1-9A-HJ-NP-Za-km-z]{32,}) failed: (?<failedResultErr>.*)$)|(?<programCompleteFailedResult>^Program failed to complete: (?<failedCompleteError>.*)$)|(?<programLog>^^Program log: (?<logMessage>.*)$)|(?<programData>^Program data: (?<data>.*)$)|(?<programConsumed>^Program (?<consumedProgramId>[1-9A-HJ-NP-Za-km-z]{32,}) consumed (?<consumedComputeUnits>\d*) of (?<allComputedUnits>\d*) compute units$)|(?<programReturn>^Program return: (?<returnProgramId>[1-9A-HJ-NP-Za-km-z]{32,}) (?<returnMessage>.*)$)/s,n=[];let r=-1,o=0,i=0;const s=[],a=[];for(const u of t){const t=e.exec(u);if(!t||!t.groups)throw new Error(`Failed to parse log line: ${u}`);if(t.groups.logTruncated)n[a[a.length-1]].invokeResult="Log truncated";else if(t.groups.programInvoke){if(s.push(t.groups.invokeProgramId),r+=1,i+=1,a.push(r),t.groups.level!=i.toString())throw new Error(`invoke depth mismatch, log: ${t.groups.level}, expected: ${i}`);n.push(ke(s[s.length-1],s.length,r,o)),n[n.length-1].rawLogs.push(u)}else if(t.groups.programSuccessResult){const e=s.pop(),r=a.pop();if(void 0===r)throw new Error("callIds malformed");if(e!=t.groups.successResultProgramId)throw new Error("[ProramSuccess] callstack mismatch");n[r].rawLogs.push(u),i-=1,0===i&&(o+=1)}else if(t.groups.programFailedResult){if(s.pop()!=t.groups.failedResultProgramId)throw new Error("[ProgramFailed] callstack mismatch");n[a[a.length-1]].rawLogs.push(u),n[a[a.length-1]].errors.push(t.groups.failedResultErr)}else if(t.groups.programCompleteFailedResult)n[a[a.length-1]].rawLogs.push(u),n[a[a.length-1]].errors.push(t.groups.failedCompleteError);else if(t.groups.programLog)n[a[a.length-1]].rawLogs.push(u),n[a[a.length-1]].logMessages.push(t.groups.logMessage);else if(t.groups.programData)n[a[a.length-1]].rawLogs.push(u),n[a[a.length-1]].dataLogs.push(t.groups.data);else if(t.groups.programConsumed)n[a[a.length-1]].rawLogs.push(u);else if(t.groups.programReturn){if(s[s.length-1]!=t.groups.returnProgramId)throw new Error("[InvokeReturn]: callstack mismatch");n[a[a.length-1]].invokeResult=t.groups.returnMessage}}return n}function Ae(t){let e;switch(o.decodeInstructionType(t)){case"AdvanceNonceAccount":{const n=o.decodeNonceAdvance(t);e={name:"advanceNonceAccount",accounts:[{name:"nonce",pubkey:n.noncePubkey,isSigner:!1,isWritable:!0},{name:"recentBlockhashSysvar",...t.keys[1]},{name:"nonceAuthority",pubkey:n.authorizedPubkey,isSigner:!0,isWritable:!1}],args:{}};break}case"Allocate":{const n=o.decodeAllocate(t);e={name:"allocate",accounts:[{name:"newAccount",pubkey:n.accountPubkey,isSigner:!0,isWritable:!0}],args:{space:new s(n.space)}};break}case"AllocateWithSeed":{const n=o.decodeAllocateWithSeed(t);e={name:"allocateWithSeed",accounts:[{name:"newAccount",pubkey:n.accountPubkey,isSigner:!1,isWritable:!0},{name:"base",pubkey:n.basePubkey,isSigner:!0,isWritable:!1}],args:{seed:n.seed,space:new s(n.space),owner:n.programId,base:n.basePubkey}};break}case"Assign":{const n=o.decodeAssign(t);e={name:"assign",accounts:[{name:"assignedAccount",pubkey:n.accountPubkey,isSigner:!0,isWritable:!0}],args:{owner:n.programId}};break}case"AssignWithSeed":{const n=o.decodeAssignWithSeed(t);e={name:"assignWithSeed",accounts:[{name:"assigned",pubkey:n.accountPubkey,isSigner:!1,isWritable:!0},{name:"base",pubkey:n.basePubkey,isSigner:!0,isWritable:!1}],args:{seed:n.seed,owner:n.programId,base:n.basePubkey}};break}case"AuthorizeNonceAccount":{const n=o.decodeNonceAuthorize(t);e={name:"authorizeNonceAccount",accounts:[{name:"nonce",isSigner:!1,isWritable:!0,pubkey:n.noncePubkey},{name:"nonceAuthority",isSigner:!0,isWritable:!1,pubkey:n.authorizedPubkey}],args:{authorized:n.newAuthorizedPubkey}};break}case"Create":{const n=o.decodeCreateAccount(t);e={name:"createAccount",accounts:[{name:"payer",pubkey:n.fromPubkey,isSigner:!0,isWritable:!0},{name:"newAccount",pubkey:n.newAccountPubkey,isSigner:!0,isWritable:!0}],args:{lamports:new s(n.lamports),owner:n.programId,space:new s(n.space)}};break}case"CreateWithSeed":{const n=o.decodeCreateWithSeed(t);e={name:"createAccountWithSeed",accounts:[{name:"payer",pubkey:n.fromPubkey,isSigner:!0,isWritable:!0},{name:"created",pubkey:n.newAccountPubkey,isSigner:!1,isWritable:!0},{name:"base",pubkey:n.basePubkey,isSigner:!0,isWritable:!1}],args:{lamports:new s(n.lamports),owner:n.programId,space:new s(n.space),seed:n.seed,base:n.basePubkey}};break}case"InitializeNonceAccount":{const n=o.decodeNonceInitialize(t);e={name:"initializeNonceAccount",accounts:[{name:"nonce",pubkey:n.noncePubkey,isSigner:!1,isWritable:!0},{name:"recentBlockhashSysvar",...t.keys[1]},{name:"rentSysvar",...t.keys[2]}],args:{authorized:n.authorizedPubkey}};break}case"Transfer":{const n=o.decodeTransfer(t);e={name:"transfer",accounts:[{name:"sender",pubkey:n.fromPubkey,isSigner:!0,isWritable:!0},{name:"receiver",pubkey:n.toPubkey,isWritable:!0,isSigner:!1}],args:{lamports:new s(n.lamports.toString())}};break}case"TransferWithSeed":{const n=o.decodeTransferWithSeed(t);e={name:"transferWithSeed",accounts:[{name:"sender",pubkey:n.fromPubkey,isSigner:!1,isWritable:!0},{name:"base",pubkey:n.basePubkey,isSigner:!0,isWritable:!1},{name:"receiver",pubkey:n.toPubkey,isSigner:!1,isWritable:!0}],args:{owner:n.programId,lamports:new s(n.lamports.toString()),seed:n.seed}};break}case"WithdrawNonceAccount":{const n=o.decodeNonceWithdraw(t);e={name:"withdrawNonceAccount",accounts:[{name:"nonce",pubkey:n.noncePubkey,isSigner:!1,isWritable:!0},{name:"recepient",pubkey:n.toPubkey,isSigner:!1,isWritable:!0},{name:"recentBlockhashSysvar",...t.keys[2]},{name:"rentSysvar",...t.keys[3]},{name:"nonceAuthority",pubkey:n.noncePubkey,isSigner:!0,isWritable:!1}],args:{lamports:new s(n.lamports)}};break}default:e=null}return e?{...e,programId:n.programId}:{programId:n.programId,name:"unknown",accounts:t.keys,args:{unknown:t.data}}}function Ee(e){let n;switch(st().decode(e.data)){case vt.InitializeMint:{const t=function(t,e=b){if(!t.programId.equals(e))throw new It;if(t.data.length!==he.span)throw new Et;const{keys:{mint:n,rent:r},data:o}=de(t);if(o.instruction!==vt.InitializeMint)throw new St;if(!n||!r)throw new At;return{programId:e,keys:{mint:n,rent:r},data:o}}(e);n={name:"initializeMint",accounts:[{name:"tokenMint",...t.keys.mint},{name:"rentSysvar",...t.keys.rent}],args:{decimals:t.data.decimals,mintAuthority:t.data.mintAuthority,freezeAuthority:t.data.freezeAuthority}};break}case vt.InitializeAccount:{const t=Vt(e);n={name:"initializeAccount",accounts:[{name:"newAccount",...t.keys.account},{name:"tokenMint",...t.keys.mint},{name:"owner",...t.keys.owner},{name:"rentSysvar",...t.keys.rent}],args:{}};break}case vt.InitializeMultisig:{const t=Ht(e),r=t.keys.signers.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"initializeMultisig",accounts:[{name:"multisig",...t.keys.account},{name:"rentSysvar",...t.keys.rent},...r],args:{m:t.data.m}};break}case vt.Transfer:{const t=ue(e),r=t.keys.multiSigners.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"transfer",accounts:[{name:"source",...t.keys.source},{name:"destination",...t.keys.destination},{name:"owner",...t.keys.owner},...r],args:{amount:new s(t.data.amount.toString())}};break}case vt.Approve:{const t=Tt(e),r=t.keys.multiSigners.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"approve",accounts:[{name:"source",...t.keys.account},{name:"delegate",...t.keys.delegate},{name:"owner",...t.keys.owner},...r],args:{amount:new s(t.data.amount.toString())}};break}case vt.Revoke:{const t=ee(e),r=t.keys.multiSigners.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"revoke",accounts:[{name:"source",...t.keys.account},{name:"owner",...t.keys.owner},...r],args:{}};break}case vt.SetAuthority:{const t=oe(e),r=t.keys.multiSigners.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"setAuthority",accounts:[{name:"account",...t.keys.account},{name:"currentAuthority",...t.keys.currentAuthority},...r],args:{authorityType:t.data.authorityType,newAuthority:t.data.newAuthority}};break}case vt.MintTo:{const t=Kt(e),r=t.keys.multiSigners.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"mintTo",accounts:[{name:"tokenMint",...t.keys.mint},{name:"mintTo",...t.keys.destination},{name:"authority",...t.keys.authority},...r],args:{amount:new s(t.data.amount.toString())}};break}case vt.Burn:{const t=Lt(e),r=t.keys.multiSigners.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"burn",accounts:[{name:"burnFrom",...t.keys.account},{name:"tokenMint",...t.keys.mint},{name:"owner",...t.keys.owner},...r],args:{amount:new s(t.data.amount.toString())}};break}case vt.CloseAccount:{const t=Rt(e),r=t.keys.multiSigners.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"closeAccount",accounts:[{name:"account",...t.keys.account},{name:"destination",...t.keys.destination},{name:"owner",...t.keys.authority},...r],args:{}};break}case vt.FreezeAccount:{const t=Yt(e),r=t.keys.multiSigners.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"freezeAccount",accounts:[{name:"account",...t.keys.account},{name:"tokenMint",...t.keys.mint},{name:"authority",...t.keys.authority},...r],args:{}};break}case vt.ThawAccount:{const t=se(e),r=t.keys.multiSigners.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"thawAccount",accounts:[{name:"account",...t.keys.account},{name:"tokenMint",...t.keys.mint},{name:"authority",...t.keys.authority},...r],args:{}};break}case vt.TransferChecked:{const t=fe(e),r=t.keys.multiSigners.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"transferChecked",accounts:[{name:"source",...t.keys.source},{name:"tokenMint",...t.keys.mint},{name:"destination",...t.keys.destination},{name:"owner",...t.keys.owner},...r],args:{amount:new s(t.data.amount.toString()),decimals:t.data.decimals}};break}case vt.ApproveChecked:{const t=xt(e),r=t.keys.multiSigners.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"approveChecked",accounts:[{name:"source",...t.keys.account},{name:"tokenMint",...t.keys.mint},{name:"delegate",...t.keys.delegate},{name:"owner",...t.keys.owner},...r],args:{amount:new s(t.data.amount.toString()),decimals:t.data.decimals}};break}case vt.MintToChecked:{const t=Qt(e),r=t.keys.multiSigners.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"mintToChecked",accounts:[{name:"tokenMint",...t.keys.mint},{name:"mintTo",...t.keys.destination},{name:"authority",...t.keys.authority},...r],args:{amount:new s(t.data.amount.toString()),decimals:t.data.decimals}};break}case vt.BurnChecked:{const t=Mt(e),r=t.keys.multiSigners.map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"burnChecked",accounts:[{name:"burnFrom",...t.keys.account},{name:"tokenMint",...t.keys.mint},{name:"owner",...t.keys.owner},...r],args:{amount:new s(t.data.amount.toString()),decimals:t.data.decimals}};break}case vt.InitializeAccount2:{const r=ft([st("instruction"),ht(32,"owner")]).decode(e.data);n={name:"initializeAccount2",accounts:[{name:"newAccount",...e.keys[0]},{name:"tokenMint",...e.keys[1]},{name:"rentSysvar",...e.keys[2]}],args:{authority:new t(r.owner)}};break}case vt.SyncNative:n={name:"syncNative",accounts:[{name:"account",...e.keys[0]}],args:{}};break;case vt.InitializeAccount3:{const r=ft([st("instruction"),ht(32,"owner")]).decode(e.data);n={name:"initializeAccount3",accounts:[{name:"newAccount",...e.keys[0]},{name:"tokenMint",...e.keys[1]}],args:{authority:new t(r.owner)}};break}case vt.InitializeMultisig2:{const t=e.keys.slice(1).map(((t,e)=>({name:`signer_${e}`,...t})));n={name:"initializeMultisig2",accounts:[{name:"multisig",...e.keys[0]},...t],args:{m:e.data[1]}};break}case vt.InitializeMint2:{const t=de(e);if(!t.keys.mint)throw new Error("Failed to parse InitializeMint2 instruction");n={name:"initializeMint2",accounts:[{name:"tokenMint",...t.keys.mint}],args:{decimals:t.data.decimals,mintAuthority:t.data.mintAuthority,freezeAuthority:t.data.freezeAuthority}};break}default:n=null}return n?{...n,programId:b}:{programId:b,name:"unknown",accounts:e.keys,args:{unknown:e.data}}}function Se(t){return{name:"createAssociatedTokenAccount",accounts:[{name:"fundingAccount",...t.keys[0]},{name:"newAccount",...t.keys[1]},{name:"wallet",...t.keys[2]},{name:"tokenMint",...t.keys[3]},{name:"systemProgram",...t.keys[4]},{name:"tokenProgram",...t.keys[5]},t.keys.length>5?{name:"rentSysvar",...t.keys[6]}:void 0],args:{},programId:k}}function ve(t,e){return t.map((t=>{const n=t.name;if(Object.prototype.hasOwnProperty.call(t,"accounts")){const r=e?`${e} > ${n}`:n;return ve(t.accounts,r)}return{...t,name:e?`${e} > ${n}`:n}})).flat()}!function(t){t[t.Initialize=0]="Initialize",t[t.UpdateRate=1]="UpdateRate"}(le||(le={})),ft([st("instruction"),st("interestBearingMintInstruction"),bt("rateAuthority"),A("rate")]),ft([st("instruction"),st("interestBearingMintInstruction"),A("rate")]),ft([st("instruction"),bt("owner")]),ft([st("instruction"),bt("owner")]),ft([st("instruction")]),ft([st("instruction"),st("closeAuthorityOption"),bt("closeAuthority")]),ft([st("instruction")]),ft([st("instruction"),bt("delegate")]);class Be{constructor(e,r){const o=[[n.programId.toBase58(),Ae],[b.toBase58(),Ee],[k.toBase58(),Se]];let i;r=r||[];for(const n of e)r.push(this.buildIdlParser(new t(n.programId),n.idl));if(r){i=new Map(r);for(const t of o)i.has(t[0])||i.set(...t)}else i=new Map(o);this.instructionParsers=i}addParser(t,e){this.instructionParsers.set(t.toBase58(),e)}addParserFromIdl(e,n){this.instructionParsers.set(...this.buildIdlParser(new t(e),n))}buildIdlParser(t,e){return[t.toBase58(),(t=>{const n=new a(e).decode(t.data);if(n){const r=e.instructions.find((t=>t.name===n.name));if(!r)return this.buildUnknownParsedInstruction(t.programId,t.keys,t.data,n.name);const o=ve(r.accounts),i=t.keys.map(((t,e)=>e<o.length?{name:o[e].name,...t}:{name:"Remaining "+(e-o.length),...t}));return{name:n.name,accounts:i,programId:t.programId,args:n.data}}return this.buildUnknownParsedInstruction(t.programId,t.keys,t.data)}).bind(this)]}removeParser(t){this.instructionParsers.delete(t.toBase58())}buildUnknownParsedInstruction(t,e,n,r){return{programId:t,accounts:e,args:{unknown:n},name:r||"unknown"}}parseInstruction(t){if(this.instructionParsers.has(t.programId.toBase58())){return this.instructionParsers.get(t.programId.toBase58())(t)}return this.buildUnknownParsedInstruction(t.programId,t.keys,t.data)}parseTransactionData(t,e){const n=ge(t,e);return t.compiledInstructions.map((t=>this.parseInstruction(ye(t,n))))}parseTransactionParsedData(t){const e=t.accountKeys.map((t=>({isSigner:t.signer,isWritable:t.writable,pubkey:t.pubkey})));return t.instructions.map((t=>this.parseInstruction(we(t,e))))}async parseTransaction(t,e,n=!1,r="confirmed"){var o;const i=await t.getTransaction(e,{commitment:r,maxSupportedTransactionVersion:0});if(!i)return null;if(n){return be(i).map((t=>this.parseInstruction(t)))}return this.parseTransactionData(i.transaction.message,null===(o=i.meta)||void 0===o?void 0:o.loadedAddresses)}parseTransactionDump(t){t instanceof u.Buffer||(t=u.Buffer.from(t,"base64"));const e=r.from(t).compileMessage();return this.parseTransactionData(e)}}export{Be as SolanaParser,ye as compiledInstructionToInstruction,be as flattenTransactionResponse,pe as hexToBuffer,Ie as parseLogs,ge as parseTransactionAccounts,we as parsedInstructionToInstruction};
//# sourceMappingURL=index.js.map
